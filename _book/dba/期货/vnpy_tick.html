
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>期货Tick数据处理 · HiBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="方莲">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-advanced-emoji/emoji-website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-splitter/splitter.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-page-toc-button/plugin.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-tbfed-pagefooter/footer.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-prism/prism-dracula.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-alerts/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-latex-codecogs/latex-codecogs.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../calendar.html" />
    
    
    <link rel="prev" href="../数据清理要点.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    
    
        
        <li>
            <a href="https://williamlfang.github.io/" target="_blank" class="custom-link">William's Blog</a>
        </li>
    
    

    
    <li class="divider"></li>
    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    关于
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">服务器运维</li>
        
        
    
        <li class="chapter " data-level="2.1" >
            
                <span>
            
                    
                    CentOS7 操作系统
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="../../os/centos/centos7.html">
            
                <a href="../../os/centos/centos7.html">
            
                    
                    安装与配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="../../os/centos/LLVM 扩展逻辑磁盘.html">
            
                <a href="../../os/centos/LLVM 扩展逻辑磁盘.html">
            
                    
                    LLVM 扩展逻辑磁盘
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="../../os/frp.html">
            
                <a href="../../os/frp.html">
            
                    
                    内网穿透
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.4" data-path="../../os/centos/gcc.html">
            
                <a href="../../os/centos/gcc.html">
            
                    
                    升级gcc
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.5" data-path="../../os/centos/CentOS7命令行设置分辨率.html">
            
                <a href="../../os/centos/CentOS7命令行设置分辨率.html">
            
                    
                    命令行设置分辨率
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.6" data-path="../../os/命令行启动 TeamViewer.html">
            
                <a href="../../os/命令行启动 TeamViewer.html">
            
                    
                    命令行启动 TeamViewer
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.7" data-path="../../os/sshfs 挂载远程服务器.html">
            
                <a href="../../os/sshfs 挂载远程服务器.html">
            
                    
                    sshfs 挂载远程服务器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.1.8" data-path="../../os/hicloud_exmail.html">
            
                <a href="../../os/hicloud_exmail.html">
            
                    
                    邮件系统
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" >
            
                <span>
            
                    
                    MySQL 数据库
            
                </span>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.1" data-path="../mysql/datapath.html">
            
                <a href="../mysql/datapath.html">
            
                    
                    修改数据存储目录
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.2" data-path="../mysql/database.html">
            
                <a href="../mysql/database.html">
            
                    
                    建立数据库命令
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.3" data-path="../mysql/operation.md">
            
                <span>
            
                    
                    数据库运维操作
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.4" data-path="../数据清理要点.html">
            
                <a href="../数据清理要点.html">
            
                    
                    数据清理要点
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="2.2.4.1" data-path="vnpy_tick.html">
            
                <a href="vnpy_tick.html">
            
                    
                    期货Tick数据处理
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2.5" data-path="../calendar.html">
            
                <a href="../calendar.html">
            
                    
                    金融交易日历
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.6" data-path="数据库.html">
            
                <a href="数据库.html">
            
                    
                    期货数据库
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7" data-path="../股票/数据库.html">
            
                <a href="../股票/数据库.html">
            
                    
                    股票数据库
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.2.7.1" data-path="../股票/行情数据.html">
            
                <a href="../股票/行情数据.html">
            
                    
                    行情数据
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.2" data-path="../股票/基本信息.html">
            
                <a href="../股票/基本信息.html">
            
                    
                    基本信息
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2.7.3" data-path="../股票/复权因子.html">
            
                <a href="../股票/复权因子.html">
            
                    
                    股票复权因子
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">交易系统开发</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../../trading/期货/ctp.html">
            
                <a href="../../trading/期货/ctp.html">
            
                    
                    期货
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1.1" data-path="../../trading/期货/ctp_md.html">
            
                <a href="../../trading/期货/ctp_md.html">
            
                    
                    行情类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.2" data-path="../../trading/期货/ctp_td.md">
            
                <span>
            
                    
                    交易类
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.1.3" data-path="../../trading/cmake.html">
            
                <a href="../../trading/cmake.html">
            
                    
                    cmake
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../../trading/股票/程序化之路.html">
            
                <a href="../../trading/股票/程序化之路.html">
            
                    
                    股票
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../../trading/股票/xtp-关于.html">
            
                <a href="../../trading/股票/xtp-关于.html">
            
                    
                    中泰·XTP
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1.1" data-path="../../trading/股票/xtp-申请.html">
            
                <a href="../../trading/股票/xtp-申请.html">
            
                    
                    申请
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.2" data-path="../../trading/股票/xtp-服务器配置.html">
            
                <a href="../../trading/股票/xtp-服务器配置.html">
            
                    
                    服务器配置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.1.3" data-path="../../trading/股票/xtp-运行流程.html">
            
                <a href="../../trading/股票/xtp-运行流程.html">
            
                    
                    运行流程
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../../trading/股票/tora.html">
            
                <a href="../../trading/股票/tora.html">
            
                    
                    华鑫·Tora
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../../trading/股票/oes.md">
            
                <span>
            
                    
                    宽睿·Oes
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../../trading/vnpy.html">
            
                <a href="../../trading/vnpy.html">
            
                    
                    vnpy
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >期货Tick数据处理</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <blockquote>
<p><strong>[info] &#x671F;&#x8D27;Tick&#x6570;&#x636E;&#x5904;&#x7406;&#x9879;&#x76EE;: 166/fl/myData/vnpyRcpp/</strong></p>
<ul>
<li>&#x9996;&#x5148;&#xFF0C;&#x4F7F;&#x7528;&#x7A0B;&#x5E8F;&#x83B7;&#x53D6;&#x6BCF;&#x65E5;&#x7684;&#x5B9E;&#x76D8; TickData&#xFF0C;&#x5E76;&#x5B58;&#x653E;&#x5230; <code>/data</code> &#x76EE;&#x5F55;</li>
<li>&#x5176;&#x6B21;&#xFF0C;&#x5728;&#x6BCF;&#x65E5;&#x6536;&#x76D8;&#x540E;&#xFF08;15:30&#xFF09;&#xFF0C;&#x5B9A;&#x65F6;&#x6267;&#x884C;&#x5904;&#x7406;&#x811A;&#x672C;&#xFF0C;&#x6839;&#x636E;&#x4E00;&#x5B9A;&#x7684;&#x89C4;&#x5219;&#x8FDB;&#x884C;&#x6570;&#x636E;&#x6E05;&#x6D17;</li>
<li>&#x7531;&#x6E05;&#x6D17;&#x5B8C;&#x6210;&#x7684; Tick &#x6570;&#x636E;&#x6C47;&#x603B;&#x5F97;&#x5230; <code>mbar</code>^[minute bar, &#x5206;&#x949F;&#x6570;&#x636E;]&#x3001;<code>dbar</code>^[daily bar, &#x65E5;&#x884C;&#x60C5;&#x6570;&#x636E;]</li>
<li>&#x540C;&#x65F6;&#xFF0C;&#x811A;&#x672C;&#x8FD8;&#x4F1A;&#x5904;&#x7406; InstrumentInfo&#xFF08;&#x5408;&#x7EA6;&#x4FE1;&#x606F;&#xFF09;&#x3001;CommissionRate&#xFF08;&#x624B;&#x7EED;&#x8D39;&#xFF09;</li>
<li>&#x7A0B;&#x5E8F;&#x4F1A;&#x5C06;&#x884C;&#x60C5;&#x6570;&#x636E;&#x5B58;&#x653E;&#x5230;&#x6570;&#x636E;&#x5E93;</li>
<li>&#x6700;&#x540E;&#xFF0C;&#x4F1A;&#x6709;&#x4E00;&#x4E2A;&#x76D1;&#x63A7;&#x811A;&#x672C;&#x68C0;&#x67E5;&#x5F53;&#x65E5;&#x6570;&#x636E;&#x7684;&#x8D28;&#x91CF;&#xFF0C;&#x5982;&#x8BC6;&#x522B;&#x662F;&#x5426;&#x5F53;&#x65E5;&#x6570;&#x636E;&#x56E0;&#x7F51;&#x7EDC;&#x4E2D;&#x65AD;&#x4EA7;&#x751F;&#x65AD;&#x70B9;&#x3001;&#x6570;&#x636E;&#x83B7;&#x53D6;&#x6570;&#x91CF;&#x662F;&#x5426;&#x7B26;&#x5408;&#x7B49;&#x3002;</li>
</ul>
<p>@williamlfang</p>
<p><strong>[warning] &#x63D0;&#x9192;</strong></p>
<p>&#x4E00;&#x822C;&#x6211;&#x4F1A;&#x628A;&#x8FD9;&#x4E2A;&#x6570;&#x636E;&#x5904;&#x7406;&#x5199;&#x6210; <code>crontab</code> &#x4EFB;&#x52A1;&#xFF0C;&#x5982;&#x679C;&#x540E;&#x9762;&#x6709;&#x51FA;&#x73B0;&#x9519;&#x8BEF;&#xFF0C;&#x76F4;&#x63A5;&#x6267;&#x884C;&#x8FD9;&#x4E2A;&#x811A;&#x672C;&#x5373;&#x53EF;</p>
</blockquote>
<pre class="language-"><code class="lang-bash"><span class="token number">20</span> <span class="token number">15</span> * * <span class="token number">1</span>-5 <span class="token function">bash</span> /home/fl/myData/shell/ProcessData_From188.sh
</code></pre>
<h1 id="tickdata-&#x6570;&#x636E;">TickData &#x6570;&#x636E;</h1>
<p>&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x770B;&#x4E00;&#x4E0B;&#x5177;&#x4F53;&#x7684; TickData &#x957F;&#x4EC0;&#x4E48;&#x6837;&#x5B50;&#x7684;</p>
<pre class="language-"><code class="lang-bash"><span class="token function">head</span> -5 <span class="token number">20191101</span>.csv                                                                                         
TimeStamp,Date,Time,InstrumentID,ExchangeID,LastPrice,PreSettlementPrice,PreClosePrice,OpenPrice,HighestPrice,LowestPrice,ClosePrice,UpperLimitPrice,LowerLimitPrice,SettlementPrice,Volume,Turnover,PreOpenInterest,OpenInterest,PreDelta,CurrDelta,BidPrice1,BidPrice2,BidPrice3,BidPrice4,BidPrice5,AskPrice1,AskPrice2,AskPrice3,AskPrice4,AskPrice5,BidVolume1,BidVolume2,BidVolume3,BidVolume4,BidVolume5,AskVolume1,AskVolume2,AskVolume3,AskVolume4,AskVolume5,AveragePrice
<span class="token number">20191031</span> <span class="token number">20</span>:35:21.705328,20191031,18:50:32.500,cu1912C51000,,11.0,4.0,11.0,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,2372.0,1.0,1.7976931348623157e+308,0,0.0,2428.0,2428.0,0.008649,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,0,0,0,0,0,0,0,0,0,0,0.0
<span class="token number">20191031</span> <span class="token number">20</span>:35:21.723210,20191031,19:31:47.0,CF005P14000,,854.0,845.0,854.0,0.0,0.0,0.0,0.0,1390.0,300.0,1.7976931348623157e+308,0,0.0,198.0,198.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0.0,0,0,0,0,0,0,0,0,0,0,0.0
<span class="token number">20191031</span> <span class="token number">20</span>:35:21.730680,20191031,18:50:32.500,cu2009C43000,,5266.0,5317.0,5266.0,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,7718.0,2915.0,1.7976931348623157e+308,0,0.0,20.0,20.0,0.855905,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,0,0,0,0,0,0,0,0,0,0,0.0
<span class="token number">20191031</span> <span class="token number">20</span>:35:21.748171,20191031,18:50:32.500,ru2004P15750,,3738.0,3738.0,3738.0,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,4579.0,2896.0,1.7976931348623157e+308,0,0.0,0.0,0.0,-0.967829,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,1.7976931348623157e+308,0,0,0,0,0,0,0,0,0,0,0.0
</code></pre>
<h1 id="&#x9879;&#x76EE;&#x7ED3;&#x6784;">&#x9879;&#x76EE;&#x7ED3;&#x6784;</h1>
<pre class="language-"><code class="lang-bash">ll                                                                                      <span class="token punctuation">[</span><span class="token number">14</span>:38:34<span class="token punctuation">]</span>
total 28K            
drwxr-xr-x.  <span class="token number">2</span> fl fl <span class="token number">4</span>.0K Sep <span class="token number">11</span> <span class="token number">17</span>:18 ./
drwxr-xr-x. <span class="token number">25</span> fl fl <span class="token number">4</span>.0K Sep <span class="token number">18</span> <span class="token number">17</span>:13 <span class="token punctuation">..</span>/
-rw-r--r--.  <span class="token number">1</span> fl fl   <span class="token number">62</span> Sep <span class="token number">13</span>  <span class="token number">2017</span> readme.md
-rw-r--r--.  <span class="token number">1</span> fl fl  11K Sep <span class="token number">11</span> <span class="token number">17</span>:18 vnpyRcpp_00_main.R
-rw-r--r--.  <span class="token number">1</span> fl fl <span class="token number">2</span>.6K Sep  <span class="token number">9</span> <span class="token number">19</span>:32 vnpyRcpp_05_info.R
</code></pre>
<h2 id="vnpyrcpp00mainr&#xFF1A;&#x4E3B;&#x7A0B;&#x5E8F;"><code>vnpyRcpp_00_main.R</code>&#xFF1A;&#x4E3B;&#x7A0B;&#x5E8F;</h2>
<p>&#x5728;&#x4E3B;&#x7A0B;&#x5E8F;&#x8BBE;&#x7F6E;&#x76F8;&#x5173;&#x7684;&#x6570;&#x636E;&#x8DEF;&#x5F84;&#x3001;&#x4EA4;&#x6613;&#x65E5;&#x671F;&#x7B49;&#x53C2;&#x6570;&#xFF0C;&#x7136;&#x540E;&#x53D6;&#x8C03;&#x7528;&#x76F8;&#x5E94;&#x7684;&#x6267;&#x884C;&#x51FD;&#x6570;&#x3002;</p>
<h3 id="&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x6240;&#x5728;&#x8DEF;&#x5F84;">&#x8BBE;&#x7F6E;&#x6570;&#x636E;&#x6240;&#x5728;&#x8DEF;&#x5F84;</h3>
<pre class="language-"><code class="lang-r"><span class="token comment">## vnpyRcpp_00_main.R</span>
<span class="token comment">## &#x8FD9;&#x662F;&#x4E3B;&#x51FD;&#x6570;:</span>
<span class="token comment">## &#x7528;&#x4E8E;&#x5F55;&#x5165; vnpyData &#x7684;&#x6570;&#x636E;&#x5230; MySQL &#x6570;&#x636E;&#x5E93;</span>
<span class="token comment">##</span>
<span class="token comment">##</span>
<span class="token comment">## &#x6CE8;&#x610F;:</span>
<span class="token comment">##</span>
<span class="token comment">## Author: fl@hicloud-investment.com</span>
<span class="token comment">## CreateDate: 2017-07-12</span>
<span class="token comment">## Revised: 2019-09-01</span>
<span class="token comment">## </span>
<span class="token comment"># source( &quot;/home/fl/myData/R/vnpyRcpp/vnpyRcpp_00_main.R&quot; )</span>
<span class="token comment">################################################################################</span>

rm<span class="token punctuation">(</span>list <span class="token operator">=</span> ls<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
ROOT_PATH <span class="token operator">&lt;-</span> <span class="token string">&apos;/home/fl/myData/R/vnpyRcpp&apos;</span>

<span class="token comment">################################################################################</span>
<span class="token comment">## STEP 0: &#x521D;&#x59CB;&#x5316;&#xFF0C;&#x8F7D;&#x5165;&#x5305;&#xFF0C;&#x8BBE;&#x5B9A;&#x521D;&#x59CB;&#x6761;&#x4EF6;</span>
<span class="token comment">################################################################################</span>
HISTORY_PATH <span class="token operator">&lt;-</span> <span class="token string">&quot;/home/fl/myData/R/ChinaFutures/HistoryData&quot;</span>
setwd<span class="token punctuation">(</span> HISTORY_PATH <span class="token punctuation">)</span>
source<span class="token punctuation">(</span> sprintf<span class="token punctuation">(</span> <span class="token string">&quot;%s/config/mySetting.R&quot;</span><span class="token punctuation">,</span> HISTORY_PATH  <span class="token punctuation">)</span> <span class="token punctuation">)</span>
Sys.setenv<span class="token punctuation">(</span><span class="token string">&quot;PKG_CXXFLAGS&quot;</span><span class="token operator">=</span><span class="token string">&quot;-g -O3 -Wall -std=c++11&quot;</span><span class="token punctuation">)</span>
sourceCpp<span class="token punctuation">(</span> sprintf<span class="token punctuation">(</span> <span class="token string">&quot;%s/config/myRcpp.cpp&quot;</span><span class="token punctuation">,</span> HISTORY_PATH <span class="token punctuation">)</span><span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">,</span>
          cacheDir <span class="token operator">=</span> <span class="token string">&quot;./tmp/Rcpp&quot;</span> <span class="token punctuation">)</span>
<span class="token comment">## =============================================================================</span>
</code></pre>
<h3 id="&#x5B9A;&#x4F4D;&#x6570;&#x636E;">&#x5B9A;&#x4F4D;&#x6570;&#x636E;</h3>
<ul>
<li>&#x9996;&#x5148;&#xFF0C;&#x4F1A;&#x53D6;&#x8BC6;&#x522B;&#x5F53;&#x65E5;&#x7684;&#x4EA4;&#x6613;&#x65E5;&#x671F;&#xFF0C;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x4EA4;&#x6613;&#x65E5;&#x671F;&#xFF0C;&#x5219;&#x7A0B;&#x5E8F;&#x81EA;&#x52A8;&#x9000;&#x51FA;&#xFF1B;</li>
<li>&#x5176;&#x6B21;&#xFF0C;&#x9700;&#x8981;&#x6839;&#x636E;&#x4EA4;&#x6613;&#x65E5;&#x671F;&#x53D6;&#x5339;&#x914D;&#x76F8;&#x5E94;&#x7684; TickData &#x5B58;&#x653E;&#x8DEF;&#x5F84;</li>
</ul>
<pre class="language-"><code class="lang-r">
<span class="token comment">## =============================================================================</span>
setwd<span class="token punctuation">(</span> ROOT_PATH <span class="token punctuation">)</span>

<span class="token comment"># dataPath &lt;- &quot;/data/ChinaFuturesTickData/FromAli/vn.data/TianMi3/nanhua/TickData&quot;</span>

dataPath <span class="token operator">&lt;-</span> <span class="token string">&quot;/data/ChinaFuturesTickData/From188/vn.data/TianMi3/nanhua/TickData&quot;</span>
<span class="token comment"># coloSource &lt;- &quot;TianMi3_From188&quot;</span>
<span class="token comment">## =============================================================================</span>

<span class="token comment">## =============================================================================</span>
tradingday <span class="token operator">&lt;-</span> format<span class="token punctuation">(</span> Sys.Date<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string">&quot;%Y%m%d&quot;</span> <span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> tradingday <span class="token percent-operator operator">%in%</span> ChinaFuturesCalendar<span class="token operator">$</span>days <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stop<span class="token punctuation">(</span> <span class="token string">&quot;NOT TradingDay !!!&quot;</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
tarball <span class="token operator">&lt;-</span> list.files<span class="token punctuation">(</span>dataPath<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">&apos;\\.tar\\.bz2&apos;</span><span class="token punctuation">,</span> full.name <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
    grep<span class="token punctuation">(</span> tradingday<span class="token punctuation">,</span> .<span class="token punctuation">,</span>  value <span class="token operator">=</span> <span class="token boolean">TRUE</span> <span class="token punctuation">)</span>
csvfile <span class="token operator">&lt;-</span> list.files<span class="token punctuation">(</span>dataPath<span class="token punctuation">,</span> pattern <span class="token operator">=</span> <span class="token string">&apos;\\.csv$&apos;</span><span class="token punctuation">,</span> full.name <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
    grep<span class="token punctuation">(</span> tradingday<span class="token punctuation">,</span> .<span class="token punctuation">,</span>  value <span class="token operator">=</span> <span class="token boolean">TRUE</span> <span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> length<span class="token punctuation">(</span> tarball <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token operator">&amp;</span> length<span class="token punctuation">(</span> csvfile <span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    stop<span class="token punctuation">(</span> <span class="token string">&quot;NO tarball !!!&quot;</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> length<span class="token punctuation">(</span> csvfile <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    f <span class="token operator">&lt;-</span> csvfile
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> length<span class="token punctuation">(</span> tarball <span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    f <span class="token operator">&lt;-</span> tarball
<span class="token punctuation">}</span>
<span class="token comment">## =============================================================================</span>
</code></pre>
<h3 id="&#x8BFB;&#x53D6;&#x6587;&#x4EF6;">&#x8BFB;&#x53D6;&#x6587;&#x4EF6;</h3>
<pre class="language-"><code class="lang-r"><span class="token comment">## =============================================================================</span>
<span class="token comment">## 1.Reading tick</span>
system.time<span class="token punctuation">(</span> <span class="token punctuation">{</span>
    tick <span class="token operator">&lt;-</span> read_from_vnpy<span class="token punctuation">(</span> tradingday<span class="token punctuation">,</span> f <span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">## =============================================================================</span>
</code></pre>
<p>&#x5176;&#x4E2D;&#xFF0C;<code>read_from_vnpy</code> &#x8981;&#x6C42;&#x8F93;&#x5165;&#x4EA4;&#x6613;&#x65E5;&#x671F;&#x3001;&#x4EE5;&#x53CA;&#x5BF9;&#x5E94;&#x7684; TickData &#x6587;&#x4EF6;^[&#x53EF;&#x4EE5;&#x662F; tarball, &#x6216;&#x8005; csv&#xFF0C;&#x51FD;&#x6570;&#x4F1A;&#x81EA;&#x52A8;&#x8BC6;&#x522B;]&#x3002;&#x5177;&#x4F53;&#x7684;&#x51FD;&#x6570;&#x4EE3;&#x7801;&#x53EF;&#x4EE5;&#x5728; <code>166/home/fl/myData/R/ChinaFutures/HistoryData/config/mySetting.R</code> &#x627E;&#x5230;</p>
<pre class="language-"><code class="lang-r"><span class="token comment">## =============================================================================</span>
<span class="token comment">## FromVnpy</span>
read_from_vnpy <span class="token operator">&lt;-</span> <span class="token keyword">function</span><span class="token punctuation">(</span> tradingday<span class="token punctuation">,</span> datafile <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span> grepl<span class="token punctuation">(</span> <span class="token string">&apos;\\.csv$&apos;</span><span class="token punctuation">,</span>datafile <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        csvfile <span class="token operator">&lt;-</span> datafile
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        cmd <span class="token operator">&lt;-</span> sprintf<span class="token punctuation">(</span> <span class="token string">&quot;tar jxvf %s --overwrite -C /tmp/ramdisk&quot;</span><span class="token punctuation">,</span> datafile<span class="token punctuation">)</span>
        system<span class="token punctuation">(</span> cmd<span class="token punctuation">,</span> ignore.stdout <span class="token operator">=</span> <span class="token boolean">TRUE</span> <span class="token punctuation">)</span>
        csvfile <span class="token operator">&lt;-</span> sprintf<span class="token punctuation">(</span> <span class="token string">&quot;/tmp/ramdisk/%s.csv&quot;</span><span class="token punctuation">,</span> tradingday<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span> tradingday <span class="token operator">&lt;=</span> <span class="token string">&apos;20190101&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res <span class="token operator">&lt;-</span> fread<span class="token punctuation">(</span> 
                csvfile<span class="token punctuation">,</span>
                colClass <span class="token operator">=</span> c<span class="token punctuation">(</span> volume <span class="token operator">=</span> <span class="token string">&apos;numeric&apos;</span><span class="token punctuation">,</span>
                              turnover <span class="token operator">=</span> <span class="token string">&apos;numeric&apos;</span>
                            <span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
            .<span class="token punctuation">[</span><span class="token punctuation">,</span> .<span class="token punctuation">(</span> 
                TimeStamp <span class="token operator">=</span> timeStamp<span class="token punctuation">,</span>
                TradingDay <span class="token operator">=</span> tradingday<span class="token punctuation">,</span>
                UpdateTime <span class="token operator">=</span> time<span class="token punctuation">,</span>
                InstrumentID <span class="token operator">=</span> symbol<span class="token punctuation">,</span>
                OpenPrice <span class="token operator">=</span> openPrice<span class="token punctuation">,</span> 
                HighestPrice <span class="token operator">=</span> highestPrice<span class="token punctuation">,</span> 
                LowestPrice <span class="token operator">=</span> lowestPrice<span class="token punctuation">,</span> 
                ClosePrice <span class="token operator">=</span> closePrice<span class="token punctuation">,</span>
                LastPrice <span class="token operator">=</span> lastPrice<span class="token punctuation">,</span>
                AskPrice1 <span class="token operator">=</span> askPrice1<span class="token punctuation">,</span>
                AskVolume1 <span class="token operator">=</span> askVolume1<span class="token punctuation">,</span>
                BidPrice1 <span class="token operator">=</span> bidPrice1<span class="token punctuation">,</span>
                BidVolume1 <span class="token operator">=</span> bidVolume1<span class="token punctuation">,</span>
                UpperLimitPrice <span class="token operator">=</span> upperLimit<span class="token punctuation">,</span> 
                LowerLimitPrice <span class="token operator">=</span> lowerLimit<span class="token punctuation">,</span>
                Volume <span class="token operator">=</span> volume<span class="token punctuation">,</span>
                Turnover <span class="token operator">=</span> turnover<span class="token punctuation">,</span>
                OpenInterest <span class="token operator">=</span> openInterest<span class="token punctuation">,</span>
                AveragePrice <span class="token operator">=</span> averagePrice
            <span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        res <span class="token operator">&lt;-</span> fread<span class="token punctuation">(</span> 
                     csvfile<span class="token punctuation">,</span>
                     colClass <span class="token operator">=</span> c<span class="token punctuation">(</span> Volume <span class="token operator">=</span> <span class="token string">&apos;numeric&apos;</span><span class="token punctuation">,</span>
                                   Turnover <span class="token operator">=</span> <span class="token string">&apos;numeric&apos;</span>
                                 <span class="token punctuation">)</span> 
                    <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> 
            .<span class="token punctuation">[</span><span class="token punctuation">,</span> .<span class="token punctuation">(</span> 
                TimeStamp<span class="token punctuation">,</span>
                TradingDay <span class="token operator">=</span> tradingday<span class="token punctuation">,</span>
                UpdateTime <span class="token operator">=</span> Time<span class="token punctuation">,</span>
                InstrumentID<span class="token punctuation">,</span>
                OpenPrice<span class="token punctuation">,</span> 
                HighestPrice<span class="token punctuation">,</span> 
                LowestPrice<span class="token punctuation">,</span> 
                ClosePrice<span class="token punctuation">,</span>
                LastPrice<span class="token punctuation">,</span>
                AskPrice1<span class="token punctuation">,</span>
                AskVolume1<span class="token punctuation">,</span>
                BidPrice1<span class="token punctuation">,</span>
                BidVolume1<span class="token punctuation">,</span>
                UpperLimitPrice<span class="token punctuation">,</span> 
                LowerLimitPrice<span class="token punctuation">,</span>
                Volume<span class="token punctuation">,</span>
                Turnover<span class="token punctuation">,</span>
                OpenInterest<span class="token punctuation">,</span>
                AveragePrice
            <span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span>grepl<span class="token punctuation">(</span> <span class="token string">&apos;\\.csv$&apos;</span><span class="token punctuation">,</span>datafile <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
        file.remove<span class="token punctuation">(</span> csvfile <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    return<span class="token punctuation">(</span> res <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre>
<h3 id="&#x6E05;&#x6D17;&#x6570;&#x636E;">&#x6E05;&#x6D17;&#x6570;&#x636E;</h3>
<p>&#x8FD9;&#x4E2A;&#x9700;&#x8981;&#x5B9E;&#x73B0;&#x8BBE;&#x5B9A;&#x597D;&#x6E05;&#x6D17;&#x7684;&#x89C4;&#x5219;&#xFF0C;&#x7136;&#x540E;&#x4F7F;&#x7528;&#x8FC7;&#x7A0B;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x9010;&#x6B65;&#x7684;&#x5904;&#x7406;&#x5373;&#x53EF;&#x3002;&#x6211;&#x5C06;&#x5176;&#x6253;&#x5305;&#x5728;&#x4E86;&#x4E00;&#x4E2A;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x5904;&#x7406;&#xFF0C;&#x5177;&#x4F53;&#x7684;&#x51FD;&#x6570;&#x4F9D;&#x7136;&#x53EF;&#x4EE5;&#x67E5;&#x770B; <code>ChinaFutures_HisotryData_02_clean_data.R</code></p>
<pre class="language-"><code class="lang-r"><span class="token comment">## =============================================================================</span>
<span class="token comment">## 2.clean data</span>
<span class="token comment">## -----------</span>
source<span class="token punctuation">(</span> 
    sprintf<span class="token punctuation">(</span> 
        <span class="token string">&quot;%s/ChinaFutures_HisotryData_02_clean_data.R&quot;</span><span class="token punctuation">,</span> 
        <span class="token string">&quot;/home/fl/myData/R/ChinaFutures/HistoryData&quot;</span>
    <span class="token punctuation">)</span> 
<span class="token punctuation">)</span>
</code></pre>
<h3 id="&#x68C0;&#x67E5;&#x6570;&#x636E;&#x65AD;&#x70B9;&#x60C5;&#x51B5;">&#x68C0;&#x67E5;&#x6570;&#x636E;&#x65AD;&#x70B9;&#x60C5;&#x51B5;</h3>
<p>&#x5982;&#x679C;&#x53D1;&#x73B0;&#x65AD;&#x70B9;&#x6301;&#x7EED;&#x65F6;&#x95F4;&#x8D85;&#x8FC7;&#x9608;&#x503C;&#xFF0C;&#x5219;&#x53D1;&#x9001;&#x90AE;&#x4EF6;&#x901A;&#x77E5;&#x6570;&#x636E;&#x5E93;&#x7BA1;&#x7406;&#x5458;&#x3002;</p>
<pre class="language-"><code class="lang-r"><span class="token comment">## &#x68C0;&#x67E5;&#x65AD;&#x70B9;</span>
brk <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span> c<span class="token punctuation">(</span> <span class="token string">&apos;night&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;day1&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;day2&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> sectorid <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;night&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">11100</span><span class="token punctuation">,</span> <span class="token number">9300</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;day1&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token number">8</span><span class="token operator">*</span><span class="token number">3600</span> <span class="token operator">+</span> <span class="token number">55</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token operator">*</span><span class="token number">3600</span> <span class="token operator">+</span> <span class="token number">35</span><span class="token operator">*</span><span class="token number">60</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span><span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;day2&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token number">12</span><span class="token operator">*</span><span class="token number">3600</span> <span class="token operator">+</span> <span class="token number">55</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">15</span><span class="token operator">*</span><span class="token number">3600</span> <span class="token operator">+</span> <span class="token number">15</span><span class="token operator">*</span><span class="token number">60</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token comment">## ---------------------------------------------------------------------</span>
        res <span class="token operator">&lt;-</span> tick<span class="token punctuation">[</span>NumeriTimeStamp <span class="token percent-operator operator">%between%</span> time_range <span class="token operator">&amp;</span> NumericExchTime <span class="token percent-operator operator">%between%</span> time_range<span class="token punctuation">,</span> 
                    .<span class="token punctuation">(</span> TimeStamp<span class="token punctuation">,</span> UpdateTime<span class="token punctuation">,</span> NumeriTimeStamp<span class="token punctuation">,</span> NumericExchTime <span class="token punctuation">)</span>
                    <span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span> 
            .<span class="token punctuation">[</span>order<span class="token punctuation">(</span> NumeriTimeStamp <span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span>
            .<span class="token punctuation">[</span><span class="token punctuation">,</span> deltaTime <span class="token operator">:</span><span class="token operator">=</span> round<span class="token punctuation">(</span>NumeriTimeStamp <span class="token operator">-</span> shift<span class="token punctuation">(</span> NumeriTimeStamp<span class="token punctuation">,</span> <span class="token number">1L</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span>
            .<span class="token punctuation">[</span><span class="token operator">!</span>is.na<span class="token punctuation">(</span> deltaTime <span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token comment">## ---------------------------------------------------------------------</span>
    <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> rbindlist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span> nrow<span class="token punctuation">(</span> brk<span class="token punctuation">[</span>deltaTime <span class="token operator">&gt;</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">1.5</span><span class="token punctuation">]</span> <span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">5</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    library<span class="token punctuation">(</span>emayili<span class="token punctuation">)</span>
    <span class="token comment"># First create a message object.</span>
    email <span class="token operator">&lt;-</span> envelope<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment"># Add addresses for the sender and recipient.</span>
    email <span class="token operator">&lt;-</span> email <span class="token percent-operator operator">%&gt;%</span>
      from<span class="token punctuation">(</span><span class="token string">&quot;fl@hicloud-investment.com&quot;</span><span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
      to<span class="token punctuation">(</span>c<span class="token punctuation">(</span><span class="token string">&quot;fl@hicloud-investment.com&quot;</span><span class="token punctuation">,</span>
           <span class="token string">&quot;lhg@hicloud-investment.com&quot;</span><span class="token punctuation">,</span>
           <span class="token string">&quot;lj@hicloud-investment.com&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token comment"># Add a subject.</span>
    email <span class="token operator">&lt;-</span> email <span class="token percent-operator operator">%&gt;%</span> subject<span class="token punctuation">(</span>sprintf<span class="token punctuation">(</span><span class="token string">&quot;%s[ERROR]&quot;</span><span class="token punctuation">,</span> tradingday<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token comment"># Add a body.</span>
    fwrite<span class="token punctuation">(</span> brk<span class="token punctuation">[</span>deltaTime <span class="token operator">&gt;</span> <span class="token number">60</span><span class="token operator">*</span><span class="token number">1.5</span><span class="token punctuation">,</span> .<span class="token punctuation">(</span> TimeStamp<span class="token punctuation">,</span> UpdateTime<span class="token punctuation">,</span> deltaTime<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token string">&apos;/tmp/brk.csv&apos;</span> <span class="token punctuation">)</span>
    email <span class="token operator">&lt;-</span> email <span class="token percent-operator operator">%&gt;%</span> body<span class="token punctuation">(</span>
        sprintf<span class="token punctuation">(</span><span class="token string">&quot;&#x6570;&#x636E;&#x6709;&#x65AD;&#x70B9;. &#x8BF7;&#x68C0;&#x67E5; TickData &#x662F;&#x5426;&#x5B8C;&#x6574;.\n&#x6216;&#x8005;&#x66F4;&#x6362;&#x6570;&#x636E;&#x6E90;.\n%s&quot;</span><span class="token punctuation">,</span>
                paste<span class="token punctuation">(</span>readLines<span class="token punctuation">(</span><span class="token string">&apos;/tmp/brk.csv&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> collapse<span class="token operator">=</span> <span class="token string">&apos;\n&apos;</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token comment"># Add an attachment.</span>
    <span class="token comment">#email &lt;- email %&gt;% attachment(&quot;image.jpg&quot;)</span>
    <span class="token comment"># Create a SMTP server object and send the message.</span>
    smtp <span class="token operator">&lt;-</span> server<span class="token punctuation">(</span>host <span class="token operator">=</span> <span class="token string">&quot;smtp.exmail.qq.com&quot;</span><span class="token punctuation">,</span>
                   port <span class="token operator">=</span> <span class="token number">25</span><span class="token punctuation">,</span>
                   username <span class="token operator">=</span> <span class="token string">&quot;fl@hicloud-investment.com&quot;</span><span class="token punctuation">,</span>
                   password <span class="token operator">=</span> <span class="token string">&quot;***********&quot;</span><span class="token punctuation">)</span>
    smtp<span class="token punctuation">(</span>email<span class="token punctuation">,</span> verbose <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
    stop<span class="token punctuation">(</span> <span class="token string">&quot;&#x6570;&#x636E;&#x6709;&#x65AD;&#x70B9; !!!&quot;</span> <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">## =============================================================================</span>
</code></pre>
<h3 id="&#x751F;&#x6210;-bar-&#x6570;&#x636E;">&#x751F;&#x6210; Bar &#x6570;&#x636E;</h3>
<ul>
<li>&#x4F7F;&#x7528;&#x5E76;&#x884C;&#x8BA1;&#x7B97;&#x5206;&#x949F;&#x6570;&#x636E;</li>
<li>&#x4ECE;&#x5206;&#x949F;&#x6570;&#x636E;&#x6C47;&#x603B;&#x5F97;&#x5230;&#x65E5;&#x884C;&#x60C5;&#x6570;&#x636E;</li>
</ul>
<pre class="language-"><code class="lang-r"><span class="token comment">## =============================================================================</span>
<span class="token comment">## 3.generate bar</span>
tick <span class="token operator">&lt;-</span> tick <span class="token percent-operator operator">%&gt;%</span>
    .<span class="token punctuation">[</span>nchar<span class="token punctuation">(</span> InstrumentID <span class="token punctuation">)</span> <span class="token operator">&lt;=</span> <span class="token number">6</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span>
    .<span class="token punctuation">[</span>DeltaVolume <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span> 
    .<span class="token punctuation">[</span><span class="token punctuation">,</span> Minute <span class="token operator">:</span><span class="token operator">=</span> sprintf<span class="token punctuation">(</span> <span class="token string">&quot;%02d:%02d&quot;</span><span class="token punctuation">,</span>UpdateHour<span class="token punctuation">,</span>UpdateMinute <span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span> 
    setkey<span class="token punctuation">(</span> .<span class="token punctuation">,</span> TradingDay<span class="token punctuation">,</span> InstrumentID<span class="token punctuation">,</span>Minute <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span>
    .<span class="token punctuation">[</span>order<span class="token punctuation">(</span> InstrumentID<span class="token punctuation">,</span>NumericExchTime<span class="token punctuation">,</span>Volume <span class="token punctuation">)</span><span class="token punctuation">]</span>

system.time<span class="token punctuation">(</span> <span class="token punctuation">{</span>
    mbar <span class="token operator">&lt;-</span> tick<span class="token punctuation">[</span><span class="token punctuation">,</span> .<span class="token punctuation">(</span> 
        NumericExchTime <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> NumericExchTime<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">## -------------------------------</span>
        OpenPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> LastPrice<span class="token punctuation">]</span><span class="token punctuation">,</span> 
        HighPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> LastPrice<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        LowPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> min<span class="token punctuation">(</span> LastPrice<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     
        ClosePrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span>.N<span class="token punctuation">,</span> LastPrice<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">## -------------------------------</span>
        <span class="token comment"># wOpenPrice = .SD[1, </span>
        <span class="token comment">#     (AskPrice1 * AskVolume1 + BidPrice1 * BidVolume1) / ( AskVolume1 + BidVolume1 )],</span>
        <span class="token comment"># wHighPrice = .SD[which.max( LastPrice ), </span>
        <span class="token comment">#     (AskPrice1 * AskVolume1 + BidPrice1 * BidVolume1) / ( AskVolume1 + BidVolume1 )],</span>
        <span class="token comment"># wLowPrice = .SD[which.min( LastPrice ), </span>
        <span class="token comment">#     (AskPrice1 * AskVolume1 + BidPrice1 * BidVolume1) / ( AskVolume1 + BidVolume1 )],</span>
        <span class="token comment"># wClosePrice = .SD[.N, </span>
        <span class="token comment">#     (AskPrice1 * AskVolume1 + BidPrice1 * BidVolume1) / ( AskVolume1 + BidVolume1 )],</span>
        <span class="token comment">## -------------------------------</span>
        Volume <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> sum<span class="token punctuation">(</span> DeltaVolume <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        Turnover <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> sum<span class="token punctuation">(</span> DeltaTurnover <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">## -------------------------------</span>
        OpenOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> OpenInterest<span class="token punctuation">]</span><span class="token punctuation">,</span>
        HighOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> OpenInterest<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        LowOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> min<span class="token punctuation">(</span> OpenInterest<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        CloseOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span>.N<span class="token punctuation">,</span> OpenInterest<span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">## -------------------------------</span>
        UpperLimitPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> UpperLimitPrice<span class="token punctuation">,</span>na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        LowerLimitPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> LowerLimitPrice<span class="token punctuation">,</span>na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span> by <span class="token operator">=</span> c<span class="token punctuation">(</span> <span class="token string">&quot;TradingDay&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;InstrumentID&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;Minute&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span> 
        .<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;:=&quot;</span><span class="token punctuation">(</span> SettlementPrice <span class="token operator">=</span> <span class="token keyword">NA</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token comment"># cols &lt;- c( &apos;wOpenPrice&apos;,&apos;wClosePrice&apos; )</span>
    <span class="token comment"># mbar[, ( cols ) := lapply( .SD, round, 2 ), .SDcols = cols]</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token boolean">FALSE</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">## 20:55:00 ~ 02:35:00 / 08:55:00 ~ 15:15:00</span>
    <span class="token comment">## 20:55:00  : ( 20*3600 + 55*60 - 86400 )  : -11100</span>
    <span class="token comment">## 02:35:00  : ( 2*3600 + 35*60 )           : 9300         </span>
    <span class="token comment">## 08:55:00  : ( 8*3600 + 55*60 )           : 32100</span>
    <span class="token comment">## 11:35:00  : ( 11*3600 + 35*60 )          : 41700</span>
    <span class="token comment">## 12:55:00  : ( 12*3600 + 55*60 )          : 46500</span>
    <span class="token comment">## 15:15:00  : ( 15*3600 + 15*60 )          : 54900</span>
<span class="token punctuation">}</span>

system.time<span class="token punctuation">(</span> <span class="token punctuation">{</span>
    dbar <span class="token operator">&lt;-</span> lapply<span class="token punctuation">(</span> c<span class="token punctuation">(</span> <span class="token string">&apos;allday&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;night&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;day&apos;</span> <span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span> sectorid <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;allday&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">11100</span><span class="token punctuation">,</span> <span class="token number">54900</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;night&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token operator">-</span><span class="token number">11100</span><span class="token punctuation">,</span> <span class="token number">9300</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> sectorid <span class="token operator">==</span> <span class="token string">&apos;day&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
            time_range <span class="token operator">&lt;-</span> c<span class="token punctuation">(</span> <span class="token number">32100</span><span class="token punctuation">,</span> <span class="token number">54900</span> <span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        res <span class="token operator">&lt;-</span> tick<span class="token punctuation">[</span>NumeriTimeStamp <span class="token percent-operator operator">%between%</span> time_range <span class="token operator">&amp;</span> NumericExchTime <span class="token percent-operator operator">%between%</span> time_range<span class="token punctuation">,</span> .<span class="token punctuation">(</span> 
            <span class="token comment">## -------------------------------</span>
            OpenPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> LastPrice<span class="token punctuation">]</span><span class="token punctuation">,</span> 
            HighPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> LastPrice<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            LowPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> min<span class="token punctuation">(</span> LastPrice<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>     
            ClosePrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span>.N<span class="token punctuation">,</span> LastPrice<span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">## -------------------------------</span>
            Volume <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> sum<span class="token punctuation">(</span> DeltaVolume <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            Turnover <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> sum<span class="token punctuation">(</span> DeltaTurnover <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">## -------------------------------</span>
            OpenOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> OpenInterest<span class="token punctuation">]</span><span class="token punctuation">,</span>
            HighOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> OpenInterest<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            LowOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> min<span class="token punctuation">(</span> OpenInterest<span class="token punctuation">,</span> na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            CloseOpenInterest <span class="token operator">=</span> .SD<span class="token punctuation">[</span>.N<span class="token punctuation">,</span> OpenInterest<span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token comment">## -------------------------------</span>
            UpperLimitPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> UpperLimitPrice<span class="token punctuation">,</span>na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            LowerLimitPrice <span class="token operator">=</span> .SD<span class="token punctuation">[</span><span class="token punctuation">,</span> max<span class="token punctuation">(</span> LowerLimitPrice<span class="token punctuation">,</span>na.rm<span class="token operator">=</span><span class="token boolean">TRUE</span> <span class="token punctuation">)</span><span class="token punctuation">]</span>
            <span class="token comment">## -------------------------------</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span> by <span class="token operator">=</span> c<span class="token punctuation">(</span> <span class="token string">&quot;TradingDay&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;InstrumentID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token percent-operator operator">%&gt;%</span> 
            .<span class="token punctuation">[</span><span class="token punctuation">,</span> <span class="token string">&quot;:=&quot;</span><span class="token punctuation">(</span> SettlementPrice <span class="token operator">=</span> <span class="token keyword">NA</span><span class="token punctuation">,</span> Sector <span class="token operator">=</span> sectorid <span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token punctuation">)</span> <span class="token percent-operator operator">%&gt;%</span> rbindlist<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">## =============================================================================</span>
</code></pre>
<h3 id="&#x5165;&#x5E93;">&#x5165;&#x5E93;</h3>
<pre class="language-"><code class="lang-r"><span class="token comment">## =============================================================================</span>
<span class="token comment">## 4.save to mysql</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span> k <span class="token keyword">in</span> c<span class="token punctuation">(</span> <span class="token string">&apos;daily&apos;</span><span class="token punctuation">,</span><span class="token string">&apos;minute&apos;</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
    mysqlSend<span class="token punctuation">(</span> 
        db <span class="token operator">=</span> <span class="token string">&apos;china_futures_bar&apos;</span><span class="token punctuation">,</span>
        query <span class="token operator">=</span> sprintf<span class="token punctuation">(</span>&quot;delete from %s
                         where TradingDay <span class="token operator">=</span> %s&quot;<span class="token punctuation">,</span>
                         k<span class="token punctuation">,</span> tradingday
                         <span class="token punctuation">)</span><span class="token punctuation">,</span>
        host <span class="token operator">=</span> <span class="token string">&apos;192.168.1.166&apos;</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

mysqlWrite<span class="token punctuation">(</span> 
    db <span class="token operator">=</span> <span class="token string">&apos;china_futures_bar&apos;</span><span class="token punctuation">,</span>
    tbl <span class="token operator">=</span> <span class="token string">&apos;minute&apos;</span><span class="token punctuation">,</span>
    data <span class="token operator">=</span> mbar<span class="token punctuation">,</span>
    host <span class="token operator">=</span> <span class="token string">&apos;192.168.1.166&apos;</span>
<span class="token punctuation">)</span>

mysqlWrite<span class="token punctuation">(</span> 
    db <span class="token operator">=</span> <span class="token string">&apos;china_futures_bar&apos;</span><span class="token punctuation">,</span>
    tbl <span class="token operator">=</span> <span class="token string">&apos;daily&apos;</span><span class="token punctuation">,</span>
    data <span class="token operator">=</span> dbar
<span class="token punctuation">)</span>
</code></pre>
<h1 id="&#x5904;&#x7406;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x4FE1;&#x606F;">&#x5904;&#x7406;&#x5176;&#x4ED6;&#x6570;&#x636E;&#x4FE1;&#x606F;</h1>
<h2 id="&#x5904;&#x7406;&#x5408;&#x7EA6;&#x4FE1;&#x606F;&#x6570;&#x636E;">&#x5904;&#x7406;&#x5408;&#x7EA6;&#x4FE1;&#x606F;&#x6570;&#x636E;</h2>
<pre class="language-"><code class="lang-r">try<span class="token punctuation">(</span>source<span class="token punctuation">(</span><span class="token string">&apos;./vnpyRcpp_05_info.R&apos;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="&#x8BA1;&#x7B97;&#x4E3B;&#x529B;&#x5408;&#x7EA6;">&#x8BA1;&#x7B97;&#x4E3B;&#x529B;&#x5408;&#x7EA6;</h2>
<pre class="language-"><code class="lang-r">rint<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span><span class="token string">&quot;#---------- Update MainContract Information  ---------------------#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
source<span class="token punctuation">(</span><span class="token string">&apos;/home/fl/myData/R/Rconfig/MainContract_00_main.R&apos;</span><span class="token punctuation">)</span>
print<span class="token punctuation">(</span>paste0<span class="token punctuation">(</span><span class="token string">&quot;#-----------------------------------------------------------------#&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre>
<h2 id="&#x8BA1;&#x7B97;&#x5F53;&#x65E5;&#x7684;&#x5F00;&#x5E73;&#x4ED3;&#x7684;&#x76C8;&#x4E8F;">&#x8BA1;&#x7B97;&#x5F53;&#x65E5;&#x7684;&#x5F00;&#x5E73;&#x4ED3;&#x7684;&#x76C8;&#x4E8F;</h2>
<pre class="language-"><code class="lang-r">ry<span class="token punctuation">(</span>
    system<span class="token punctuation">(</span><span class="token string">&apos;/home/fl/anaconda2/bin/python /home/fl/myData/python/hicloud_exmail_PnL.py&apos;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    silent <span class="token operator">=</span> <span class="token boolean">TRUE</span>
<span class="token punctuation">)</span>
</code></pre>
<h1 id="&#x7ED3;&#x675F;&#x7A0B;&#x5E8F;">&#x7ED3;&#x675F;&#x7A0B;&#x5E8F;</h1>
<pre class="language-"><code class="lang-r"><span class="token comment">## -------------------------------------------------------------------------</span>
suppFunction<span class="token punctuation">(</span> <span class="token punctuation">{</span>
    try<span class="token punctuation">(</span><span class="token punctuation">{</span>
        rm<span class="token punctuation">(</span> tick <span class="token punctuation">)</span><span class="token punctuation">;</span> rm<span class="token punctuation">(</span> mbar <span class="token punctuation">)</span><span class="token punctuation">;</span> rm<span class="token punctuation">(</span> dbar <span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token punctuation">,</span> silent <span class="token operator">=</span> <span class="token boolean">TRUE</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token punctuation">)</span>
<span class="token comment">## -------------------------------------------------------------------------</span>
</code></pre>
<footer class="page-footer"><span class="copyright">@william</span><span class="footer-modification">&#x6700;&#x540E;&#x4FEE;&#x6539;&#x65F6;&#x95F4;&#xFF1A;
2019-11-02 11:21:05
</span></footer> <link rel="stylesheet" type="text/css" href="https://storage.googleapis.com/app.klipse.tech/css/codemirror.css"> <script>     window.klipse_settings = {         selector: ".language-klipse, .lang-eval-clojure",         selector_eval_js: ".lang-eval-js",         selector_eval_python_client: ".lang-eval-python",         selector_eval_php: ".lang-eval-php",         selector_eval_scheme: ".lang-eval-scheme",         selector_eval_ruby: ".lang-eval-ruby",         selector_reagent: ".lang-reagent",        selector_google_charts: ".lang-google-chart",        selector_es2017: ".lang-eval-es2017",        selector_jsx: ".lang-eval-jsx",        selector_transpile_jsx: ".lang-transpile-jsx",        selector_render_jsx: ".lang-render-jsx",        selector_react: ".lang-react",        selector_eval_markdown: ".lang-render-markdown",        selector_eval_lambdaway: ".lang-render-lambdaway",        selector_eval_cpp: ".lang-eval-cpp",        selector_eval_html: ".lang-render-html",        selector_sql: ".lang-eval-sql",        selector_brainfuck: "lang-eval-brainfuck",        selector_js: ".lang-transpile-cljs"    }; </script> <script src="https://storage.googleapis.com/app.klipse.tech/plugin/js/klipse_plugin.js"></script>
<script>console.log("plugin-popup....");document.onclick = function(e){ e.target.tagName === "IMG" && window.open(e.target.src,e.target.src)}</script><style>img{cursor:pointer}</style>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../数据清理要点.html" class="navigation navigation-prev " aria-label="Previous page: 数据清理要点">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../calendar.html" class="navigation navigation-next " aria-label="Next page: 金融交易日历">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"期货Tick数据处理","level":"2.2.4.1","depth":3,"next":{"title":"金融交易日历","level":"2.2.5","depth":2,"path":"dba/calendar.md","ref":"dba/calendar.md","articles":[]},"previous":{"title":"数据清理要点","level":"2.2.4","depth":2,"path":"dba/数据清理要点.md","ref":"dba/数据清理要点.md","articles":[{"title":"期货Tick数据处理","level":"2.2.4.1","depth":3,"path":"dba/期货/vnpy_tick.md","ref":"dba/期货/vnpy_tick.md","articles":[]}]},"dir":"ltr"},"config":{"plugins":["chapter-fold","expandable-chapters-small","expandable-chapters","advanced-emoji","github","splitter","-sharing","sharing-plus","simple-page-toc","page-toc-button","klipse","popup","tbfed-pagefooter","todo","prism","-highlight","advanced-emoji","alerts","url-embed","embed-pdf","copy-code-button","latex-codecogs","include-csv"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"tbfed-pagefooter":{"copyright":"","modify_label":"最后修改时间：","modify_format":"YYYY-MM-DD HH:mm:ss"},"latex-codecogs":{"type":"gif"},"chapter-fold":{},"prism":{"css":["prismjs/themes/prism-dracula.css"]},"include-csv":{},"github":{"url":"https://github.com/williamlfang"},"simple-page-toc":{"maxDepth":3,"skipFirstH1":true},"todo":{},"splitter":{},"search":{},"sharing-plus":{"qq":false,"all":["facebook","google","twitter","instapaper","linkedin","pocket","stumbleupon"],"douban":false,"facebook":true,"weibo":false,"instapaper":false,"whatsapp":false,"hatenaBookmark":false,"twitter":true,"messenger":false,"line":false,"vk":false,"pocket":true,"google":false,"viber":false,"stumbleupon":false,"qzone":false,"linkedin":false},"popup":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"page-toc-button":{"maxTocDepth":3,"minTocSize":3},"alerts":{},"expandable-chapters-small":{},"copy-code-button":{},"klipse":{"myConfigKey":"it's the default value"},"url-embed":{},"advanced-emoji":{"embedEmojis":false},"sharing":{"douban":true,"google":true,"twitter":true,"weibo":true,"all":["google","twitter","weibo"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"embed-pdf":{},"expandable-chapters":{}},"theme":"default","author":"方莲","pdf":{"pageBreaksBefore":"/","headerTemplate":null,"paperSize":"a4","margin":{"right":62,"left":62,"top":36,"bottom":36},"fontSize":12,"fontFamily":"Arial","footerTemplate":null,"chapterMark":"pagebreak","pageNumbers":false},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"isbn":"","variables":{},"title":"HiBook","links":{"sharing":{"all":null,"facebook":null,"google":null,"twitter":null,"weibo":null},"sidebar":{"William's Blog":"https://williamlfang.github.io/"}},"gitbook":"*","description":"汉云投资技术手册","extension":null},"file":{"path":"dba/期货/vnpy_tick.md","mtime":"2019-11-02T03:21:05.994Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-11-02T03:24:28.095Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-chapter-fold/chapter-fold.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters-small/expandable-chapters-small.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-splitter/splitter.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing-plus/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-page-toc-button/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-alerts/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-copy-code-button/toggle.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

